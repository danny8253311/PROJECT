@model WebSiteTest.Areas.ThriftShop.Models.ThriftShopOrders

@{
    ViewData["Title"] = "Delete";
}

<h1>Delete</h1>

<h3>Are you sure you want to delete this?</h3>
<div>
    <h4>ThriftShopOrders</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ThriftCustomerId)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ThriftCustomerId)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ThriftEmployeeId)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ThriftEmployeeId)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ThriftOrderDate)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ThriftOrderDate)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ThriftShipDate)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ThriftShipDate)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ThriftOrderStatus)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ThriftOrderStatus)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ThriftShipAddress)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ThriftShipAddress)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ShippingMethod)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ShippingMethod)
        </dd>
    </dl>
    
    @*<form asp-action="Delete">
        <input type="hidden" asp-for="ThriftOrderId" />
        <input type="submit" value="Delete" class="btn btn-danger" onclick="return swal()" /> |
        <a asp-action="Index">Back to List</a>
    </form>*@

    @*<form asp-action="Delete" id="deleteForm">
        <input type="hidden" asp-for="ThriftOrderId" id="ThriftOrderId" />
        <input type="submit" value="Delete" class="btn btn-danger" onclick="swal()" /> |
        <a asp-action="Index">Back to List</a>
    </form>*@
    <form asp-action="Delete" id="deleteForm">
        <input type="hidden" name="ThriftOrderId" id="ThriftOrderId" />
        <button type="button" class="btn btn-danger" id="deleteButton">Delete</button>
        <a asp-action="Index" class="btn btn-secondary">Back to List</a>
    </form>

</div>
@*@section Scripts
    {
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#deleteButton').click(function (event) {
                event.preventDefault();
                var thriftOrderId = $('input[name="ThriftOrderId"]').val();
                
                swal({
                    title: "Are you sure?",
                    text: "Once deleted, you will not be able to recover this imaginary file!",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: "POST",
                            url: "/Areas/ThriftShop/ThriftShopOrders/Delete",
                            data: { ThriftOrderId: thriftOrderId },
                            success: function (data) {
                                swal("Poof! Your imaginary file has been deleted!", {
                                    icon: "success",
                                }).then(function () {
                                    window.location.href = "/Areas/ThriftShop/ThriftShopOrders/Index";
                                });
                            },
                            error: function (xhr, status, error) {
                                swal("Oops!", "An error occurred while deleting the file.", "error");
                            }
                        });
                    } else {
                        swal("Your imaginary file is safe!");
                    }
                });
            });
        });

    </script>
}*@
@section Scripts
    {
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#deleteButton').click(function () {
                var thriftOrderId = $('input[name="ThriftOrderId"]').val();
                swal({
                    title: "Are you sure?",
                    text: "Once deleted, you will not be able to recover this imaginary file!",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: "POST",
                            url: "/Areas/ThriftShop/ThriftShopOrders/Delete",
                            data: { ThriftOrderId: thriftOrderId },
                            success: function (data) {
                                swal("Poof! Your imaginary file has been deleted!", {
                                    icon: "success",
                                }).then(function () {
                                    $('#deleteForm').submit(); // 提交表單
                                });
                            },
                            error: function (xhr, status, error) {
                                swal("Oops!", "An error occurred while deleting the file.", "error");
                            }
                        });
                    } else {
                        swal("Your imaginary file is safe!");
                    }
                });
            });
        });

    </script>
}
